# Railway Configuration for Al-Mudeer
# Optimized for Arab World users + Horizontal Scaling

[build]
builder = "nixpacks"  # Railway's default builder

[deploy]
startCommand = ".venv/bin/uvicorn main:app --host 0.0.0.0 --port $PORT"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10
# Scaling: Railway supports multiple replicas in paid plans
# numReplicas = 2  # Uncomment for horizontal scaling (paid)

# Performance optimization for Arab World
[env]
# Region hint (Railway will use EU West if available)
REGION = "EU-West"
OPTIMIZED_FOR = "Arab-World"

# Database configuration
DB_TYPE = "postgresql"

# Performance settings
WORKERS = "2"  # Per instance
KEEP_ALIVE = "5"

# Horizontal scaling settings (sessions stored in Redis)
SESSION_TTL_HOURS = "24"
